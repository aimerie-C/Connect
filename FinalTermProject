using System;

class GameBoard
{
    private char[,] _board;
    public int Rows { get; private set; }
    public int Cols { get; private set; }

    public GameBoard(int rows, int cols)
    {
        Rows = rows;
        Cols = cols;
        _board = new char[Rows, Cols];
        InitializeBoard();
    }

    public void InitializeBoard()
    {
        for (int rows = 0; rows < Rows; rows++)
        {
            for (int cols = 0; cols < Cols; cols++)
            {
                _board[rows, cols] = ' ';
            }
        }
    }

    public void ResetBoard()
    {
        // Reset the board to its initial state
        InitializeBoard();
    }

    public void DrawBoard()
    {
        Console.Clear();

        Console.WriteLine();
       
        for (int rows = 0; rows < Rows; rows++)
        {
            Console.Write("|");
            for (int cols = 0; cols < Cols; cols++)
            {
                char symbol = _board[rows, cols] == ' ' ? '#' : _board[rows, cols];
                Console.Write(symbol + " ");
            }
            Console.WriteLine("|");
        }
        Console.WriteLine(" 1 2 3 4 5 6 7");
    }

    public bool PlaceSymbol(int cols, char symbol)
    {
        if (!IsColumnOpen(cols))
        {
            return false; // Column is full
        }
    
        for (int rows = Rows - 1; rows >= 0; rows--)
        {
            if (_board[rows, cols] == ' ')
            {
                _board[rows, cols] = symbol;
                return true;
            }
        }
        return false;
    }
     public bool IsColumnOpen(int cols)
     {
         // Check if the column has at least one empty space
         for (int rows = 0; rows < Rows; rows++)
         {
             if (_board[rows, cols] == ' ')
             {
                 return true; // Column has space
             }
         }
         return false; // Column is full
     }
    public bool IsBoardFull()
    {
        for (int rows = 0; rows < Rows; rows++)
        {
            for (int cols = 0; cols < Cols; cols++)
            {
                if (_board[rows, cols] == ' ')
                {
                    return false;
                }
            }
        }
        return true;
    }
    public bool CheckWin(char symbol)
    {
        return CheckStraightLines(symbol) || CheckDiagonals(symbol);
    }

     private bool CheckStraightLines(char symbol)
     {
         // Check horizontally and vertically for four consecutive symbols
         for (int rows = 0; rows < Rows; rows++)
         {
             for (int cols = 0; cols < Cols - 3; cols++)
             {
                 if (_board[rows, cols] == symbol &&
                     _board[rows, cols] == _board[rows, cols + 1] &&
                     _board[rows, cols] == _board[rows, cols + 2] &&
                     _board[rows, cols] == _board[rows, cols + 3])
                 {
                     return true;
                 }
             }
         }

        for (int cols = 0; cols < Cols; cols++)
        {
            for (int rows = 0; rows < Rows - 3; rows++)
            {
                if (_board[rows, cols] == symbol &&
                    _board[rows, cols] == _board[rows + 1, cols] &&
                    _board[rows, cols] == _board[rows + 2, cols] &&
                    _board[rows, cols] == _board[rows + 3, cols])
                {
                    return true;
                }
            }
        }
    
        return false;
        }

    private bool CheckDiagonals(char symbol)
    {
        // Check diagonally (both directions) for four consecutive symbols
        for (int rows = 0; rows < Rows - 3; rows++)
        {
            for (int cols = 0; cols < Cols - 3; cols++)
            {
                // Check "\" diagonals
                if (_board[rows, cols] == symbol &&
                    _board[rows, cols] == _board[rows + 1, cols + 1] &&
                    _board[rows, cols] == _board[rows + 2, cols + 2] &&
                    _board[rows, cols] == _board[rows + 3, cols + 3])
                {
                    return true;
                }
                      // Check "/" diagonals
                if (_board[rows, Cols - 1 - cols] == symbol &&
                    _board[rows, Cols - 1 - cols] == _board[rows + 1, Cols - 2 - cols] &&
                    _board[rows, Cols - 1 - cols] == _board[rows + 2, Cols - 3 - cols] &&
                    _board[rows, Cols - 1 - cols] == _board[rows + 3, Cols - 4 - cols])
                {
                    return true;
                }
            }
        }
        return false;
    }
}

class Player
{
    public string Name { get; private set; }
    public char Symbol { get; private set; }

    public Player(string name, char symbol)
    {
        Name = name;
        Symbol = symbol;
    }
}
class AIPlayer : Player
{
    private Random _random;

    public AIPlayer() : base("AI", 'O')
    {
        _random = new Random();
    }
    public int GetMove(GameBoard board)
    {
        int col;
        do
        {
            col = _random.Next(board.Cols); // Randomly select a column
        } while (!IsValidMove(board, col)); // Check if it's a valid move
    
        return col;
    }
    
    private bool IsValidMove(GameBoard board, int col)
    {
        // Check if there's any empty space in the column
        return board.IsColumnOpen(col);
    }
}

abstract class GameModeSelector
{
    public abstract int ChooseGameMode();
}

class GameSetup : GameModeSelector
{
    private Random _random;

    public GameSetup()
    {
        _random = new Random();
    }

     public override int ChooseGameMode()
     {
         int numPlayers;

         do
         {
             Console.WriteLine("Choose game mode:");
             Console.WriteLine("1 - Single Player (vs AI)");
             Console.WriteLine("2 - Two Players");
             Console.WriteLine();
             Console.WriteLine("Choose the number of players (1 or 2):");
         } while (!int.TryParse(Console.ReadLine(), out numPlayers) || (numPlayers != 1 && numPlayers != 2));
    
         return numPlayers;
     }

}



class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("Welcome to Connect Four! \n");
    }
}

